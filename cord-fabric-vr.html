<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1404.34">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #0433ff}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #ff9300}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #ff40ff}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #77bb41}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #00c7fc}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #ff2600}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; min-height: 14.0px}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo}
    span.s1 {color: #0433ff}
    span.s2 {color: #000000}
    span.s3 {color: #ff40ff}
    span.s4 {color: #ff9300}
    span.s5 {color: #77bb41}
    span.s6 {color: #00c7fc}
    span.s7 {color: #ff2600}
    span.s8 {color: #669c35}
    span.Apple-tab-span {white-space:pre}
  </style>
</head>
<body>
<p class="p1">Blue: standard fabric operation</p>
<p class="p2">Orange: vSG LAN connectivity (cross-connect)</p>
<p class="p3">Magenta: vSG WAN connectivity (default route)</p>
<p class="p4">Green: vRouter integration</p>
<p class="p5">Light Blue: PIM integration</p>
<p class="p6">Red: Link validation</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p8">{</p>
<p class="p8"><span class="Apple-converted-space">    </span>"ports" : {</p>
<p class="p8"><span class="Apple-converted-space">    </span>"of:0000000000000001/5" : { <span class="s1">// connects to node 1</span></p>
<p class="p8"><span class="Apple-converted-space">        </span>"interfaces" : [</p>
<p class="p8"><span class="Apple-converted-space">            </span>{<span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="Apple-converted-space">                </span>"ips" : [ "10.0.1.254/24" ] <span class="s1">// subnet of node 1</span></p>
<p class="p8"><span class="Apple-converted-space">            </span>},</p>
<p class="p8"><span class="Apple-converted-space">            </span>{</p>
<p class="p2"><span class="s2"><span class="Apple-converted-space">                </span>"vlan" : "69" </span>// cross-connect s-tag 69 to Fujitsu OLT</p>
<p class="p8"><span class="Apple-converted-space">            </span>},</p>
<p class="p8"><span class="Apple-converted-space">            </span>{</p>
<p class="p2"><span class="s2"><span class="Apple-converted-space">                </span>"vlan" : "222" </span>// cross-connect s-tag 222 to PMC OLT</p>
<p class="p8"><span class="Apple-converted-space">            </span>},</p>
<p class="p8"><span class="Apple-converted-space">            </span>{</p>
<p class="p8"><span class="Apple-converted-space">                </span>"ips" : [ "A.A.A.A/32" ] <span class="s3">// vSG1 public IP address /32</span></p>
<p class="p8"><span class="Apple-converted-space">            </span>},</p>
<p class="p8"><span class="Apple-converted-space">            </span>{</p>
<p class="p8"><span class="Apple-converted-space">                </span>"ips" : [ "B.B.B.B/32" ] <span class="s3">// vSG2 public IP address /32</span></p>
<p class="p8"><span class="Apple-converted-space">            </span>}</p>
<p class="p8"><span class="Apple-converted-space">        </span>]</p>
<p class="p8"><span class="Apple-converted-space">    </span>},</p>
<p class="p8"><span class="Apple-converted-space">    </span>"of:0000000000000001/7" : { <span class="s1">// connect to node 3</span></p>
<p class="p8"><span class="Apple-converted-space">        </span>"interfaces" : [</p>
<p class="p8"><span class="Apple-converted-space">            </span>{</p>
<p class="p8"><span class="Apple-converted-space">                </span>"ips" : [ "10.0.1.254/24" ] <span class="s1">// subnet of node 3</span></p>
<p class="p8"><span class="Apple-converted-space">            </span>}</p>
<p class="p8"><span class="Apple-converted-space">        </span>]</p>
<p class="p8"><span class="Apple-converted-space">    </span>},</p>
<p class="p3"><span class="s2"><span class="Apple-converted-space">    </span>"of:0000000000000001/30" : { </span>// connect to vSG3 directly without OLT (temporary)</p>
<p class="p8"><span class="Apple-converted-space">        </span>"interfaces" : [</p>
<p class="p8"><span class="Apple-converted-space">            </span>{</p>
<p class="p8"><span class="Apple-converted-space">                </span>"ips" : [ "C.C.C.C/32" ] <span class="s3">// vSG3 /32 public IP address</span></p>
<p class="p8"><span class="Apple-converted-space">            </span>}</p>
<p class="p8"><span class="Apple-converted-space">        </span>]</p>
<p class="p8"><span class="Apple-converted-space">    </span>},</p>
<p class="p8"><span class="Apple-converted-space">    </span>"of:0000000000000001/65" : { <span class="s4">// connect to Fujitsu OLT</span></p>
<p class="p8"><span class="Apple-converted-space">        </span>"interfaces" : [</p>
<p class="p8"><span class="Apple-converted-space">            </span>{</p>
<p class="p8"><span class="Apple-converted-space">                </span>"name" : "fujitsu-olt", <span class="s4">// unused</span></p>
<p class="p2"><span class="s2"><span class="Apple-converted-space">                </span>"vlan" : "69" </span>// cross-connect s-tag 69<span class="Apple-converted-space">  </span>to vSG</p>
<p class="p8"><span class="Apple-converted-space">            </span>}</p>
<p class="p8"><span class="Apple-converted-space">        </span>]</p>
<p class="p8"><span class="Apple-converted-space">    </span>},</p>
<p class="p8"><span class="Apple-converted-space">    </span>"of:0000000000000001/73" : { <span class="s4">// connect to PMC OLT</span></p>
<p class="p8"><span class="Apple-converted-space">        </span>"interfaces" : [</p>
<p class="p8"><span class="Apple-converted-space">            </span>{</p>
<p class="p8"><span class="Apple-converted-space">                </span>"name" : "pmc-olt", <span class="s4">// unused</span></p>
<p class="p2"><span class="s2"><span class="Apple-converted-space">                </span>"vlan" : "222" </span>// cross-connect s-tag 222 to vSG</p>
<p class="p8"><span class="Apple-converted-space">            </span>}</p>
<p class="p8"><span class="Apple-converted-space">        </span>]</p>
<p class="p8"><span class="Apple-converted-space">    </span>},</p>
<p class="p8"><span class="Apple-converted-space">    </span>"of:0000000000000002/5" : { <span class="s1">// connect to node 2</span></p>
<p class="p8"><span class="Apple-converted-space">        </span>"interfaces" : [</p>
<p class="p8"><span class="Apple-converted-space">            </span>{</p>
<p class="p8"><span class="Apple-converted-space">                </span>"ips" : [ "10.0.2.254/24" ] <span class="s1">// subnet of node 2</span></p>
<p class="p8"><span class="Apple-converted-space">            </span>}</p>
<p class="p8"><span class="Apple-converted-space">        </span>]</p>
<p class="p8"><span class="Apple-converted-space">    </span>},</p>
<p class="p8"><span class="Apple-converted-space">    </span>"of:0000000000000002/31" : { <span class="s5">// connect to quagga</span></p>
<p class="p8"><span class="Apple-converted-space">        </span>"interfaces" : [</p>
<p class="p8"><span class="Apple-converted-space">            </span>{</p>
<p class="p8"><span class="Apple-converted-space">                </span>"name" : "internal-quagga" <span class="s5">// quagga interface name</span></p>
<p class="p8"><span class="Apple-converted-space">            </span>}</p>
<p class="p8"><span class="Apple-converted-space">        </span>]</p>
<p class="p8"><span class="Apple-converted-space">    </span>},</p>
<p class="p8"><span class="Apple-converted-space">    </span>"of:0000000000000002/32" : { <span class="s5">// connect to Internet router</span></p>
<p class="p8"><span class="Apple-converted-space">        </span>"interfaces" : [</p>
<p class="p8"><span class="Apple-converted-space">            </span>{</p>
<p class="p8"><span class="Apple-converted-space">                </span>"name" : "external-quagga", <span class="s5">// Internet router interface name</span></p>
<p class="p8"><span class="Apple-converted-space">                </span>"ips" : [ "10.231.254.202/30", "10.231.254.223/32" ], <span class="s5">// Quagga IP addresses</span></p>
<p class="p8"><span class="Apple-converted-space">                </span>"mac" : "00:16:3e:56:2b:48" <span class="s5">// Quagga WAN MAC</span></p>
<p class="p8"><span class="Apple-converted-space">            </span>}</p>
<p class="p8"><span class="Apple-converted-space">        </span>],</p>
<p class="p8"><span class="Apple-converted-space">        </span>"pimInterface" : { <span class="s6">// PIM configuration</span></p>
<p class="p8"><span class="Apple-converted-space">            </span>"interfaceName" : "external-quagga", <span class="s6">// port that faces the Internet router</span></p>
<p class="p8"><span class="Apple-converted-space">            </span>"enabled" : true,</p>
<p class="p8"><span class="Apple-converted-space">            </span>"helloInterval" : 1,</p>
<p class="p8"><span class="Apple-converted-space">            </span>"holdTime" : 3,</p>
<p class="p8"><span class="Apple-converted-space">            </span>"propagationDelay" : 500,</p>
<p class="p8"><span class="Apple-converted-space">            </span>"overrideInterval" : 2500</p>
<p class="p8"><span class="Apple-converted-space">         </span>}</p>
<p class="p8"><span class="Apple-converted-space">    </span>}</p>
<p class="p8"><span class="Apple-converted-space">    </span>},</p>
<p class="p8"><span class="Apple-converted-space">    </span>"devices" : {</p>
<p class="p8"><span class="Apple-converted-space">        </span>"of:0000000000000001" : { <span class="s1">// fabric leaf 1</span></p>
<p class="p8"><span class="Apple-converted-space">            </span>"segmentrouting" : {</p>
<p class="p8"><span class="Apple-converted-space">                </span>"name" : "Leaf-R1",</p>
<p class="p8"><span class="Apple-converted-space">                </span>"nodeSid" : 101, <span class="s1">// segment router SID</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>"routerIp" : "10.0.1.254", </span>// segment router IP (default gateway of compute nodes)</p>
<p class="p8"><span class="Apple-converted-space">                </span>"routerMac" : "00:00:00:00:01:80", <span class="s1">// segment router MAC</span></p>
<p class="p8"><span class="Apple-converted-space">                </span>"isEdgeRouter" : true, <span class="s1">// true if this is a leaf router</span></p>
<p class="p8"><span class="Apple-converted-space">                </span>"adjacencySids" : [] <span class="s1">// unused<span class="Apple-converted-space"> </span></span></p>
<p class="p8"><span class="Apple-converted-space">            </span>}</p>
<p class="p8"><span class="Apple-converted-space">        </span>},</p>
<p class="p8"><span class="Apple-converted-space">        </span>"of:0000000000000002" : { <span class="s1">// fabric leaf 2 DPID</span></p>
<p class="p8"><span class="Apple-converted-space">            </span>"segmentrouting" : {</p>
<p class="p8"><span class="Apple-converted-space">                </span>"name" : "Leaf-R2",</p>
<p class="p8"><span class="Apple-converted-space">                </span>"nodeSid" : 102,</p>
<p class="p8"><span class="Apple-converted-space">                </span>"routerIp" : "10.0.2.254",</p>
<p class="p8"><span class="Apple-converted-space">                </span>"routerMac" : "00:00:00:00:02:80",</p>
<p class="p8"><span class="Apple-converted-space">                </span>"isEdgeRouter" : true,</p>
<p class="p8"><span class="Apple-converted-space">                </span>"adjacencySids" : []</p>
<p class="p8"><span class="Apple-converted-space">            </span>}</p>
<p class="p8"><span class="Apple-converted-space">        </span>},</p>
<p class="p8"><span class="Apple-converted-space">        </span>"of:0000000000000191" : { <span class="s1">// fabric spine 1 DPID</span></p>
<p class="p8"><span class="Apple-converted-space">            </span>"segmentrouting" : {</p>
<p class="p8"><span class="Apple-converted-space">                </span>"name" : "Spine-R1",</p>
<p class="p8"><span class="Apple-converted-space">                </span>"nodeSid" : 103,</p>
<p class="p8"><span class="Apple-converted-space">                </span>"routerIp" : "192.168.0.11",</p>
<p class="p8"><span class="Apple-converted-space">                </span>"routerMac" : "00:00:01:00:11:80",</p>
<p class="p8"><span class="Apple-converted-space">                </span>"isEdgeRouter" : false,</p>
<p class="p8"><span class="Apple-converted-space">                </span>"adjacencySids" : []</p>
<p class="p8"><span class="Apple-converted-space">            </span>}</p>
<p class="p8"><span class="Apple-converted-space">        </span>},</p>
<p class="p8"><span class="Apple-converted-space">        </span>"of:0000000000000192" : { <span class="s1">// fabric spine 2 DPID</span></p>
<p class="p8"><span class="Apple-converted-space">            </span>"segmentrouting" : {</p>
<p class="p8"><span class="Apple-converted-space">                </span>"name" : "Spine-R2",</p>
<p class="p8"><span class="Apple-converted-space">                </span>"nodeSid" : 104,</p>
<p class="p8"><span class="Apple-converted-space">                </span>"routerIp" : "192.168.0.22",</p>
<p class="p8"><span class="Apple-converted-space">                </span>"routerMac" : "00:00:01:00:22:80",</p>
<p class="p8"><span class="Apple-converted-space">                </span>"isEdgeRouter" : false,</p>
<p class="p8"><span class="Apple-converted-space">                </span>"adjacencySids" : []</p>
<p class="p8"><span class="Apple-converted-space">            </span>}</p>
<p class="p8"><span class="Apple-converted-space">        </span>}</p>
<p class="p8"><span class="Apple-converted-space">    </span>},</p>
<p class="p8"><span class="Apple-converted-space">    </span>"hosts" : {</p>
<p class="p8"><span class="Apple-converted-space">        </span>"00:02:c9:1e:b1:20/-1" : { <span class="s1">// node 1</span></p>
<p class="p8"><span class="Apple-converted-space">            </span>"basic": {</p>
<p class="p8"><span class="Apple-converted-space">                </span>"ips": ["10.0.1.1"], <span class="s1">// node 1 IP</span></p>
<p class="p8"><span class="Apple-converted-space">                </span>"location": "of:0000000000000001/5" <span class="s1">// node 1 location</span></p>
<p class="p8"><span class="Apple-converted-space">            </span>}</p>
<p class="p8"><span class="Apple-converted-space">        </span>},</p>
<p class="p8"><span class="Apple-converted-space">        </span>"02:42:cf:8d:c0:82/-1" : { <span class="s3">// vSG1</span></p>
<p class="p8"><span class="Apple-converted-space">            </span>"basic": {</p>
<p class="p8"><span class="Apple-converted-space">                </span>"ips": ["A.A.A.A"], <span class="s3">// vSG1 public IP address</span></p>
<p class="p8"><span class="Apple-converted-space">                </span>"location": "of:0000000000000001/5"</p>
<p class="p8"><span class="Apple-converted-space">            </span>}</p>
<p class="p8"><span class="Apple-converted-space">        </span>},</p>
<p class="p8"><span class="Apple-converted-space">        </span>"02:42:cf:8d:c0:83/-1" : { <span class="s3">// vSG2</span></p>
<p class="p8"><span class="Apple-converted-space">            </span>"basic": {</p>
<p class="p8"><span class="Apple-converted-space">                </span>"ips": ["B.B.B.B"], <span class="s3">// vSG2 public IP address</span></p>
<p class="p8"><span class="Apple-converted-space">                </span>"location": "of:0000000000000001/5"</p>
<p class="p8"><span class="Apple-converted-space">            </span>}</p>
<p class="p8"><span class="Apple-converted-space">        </span>},</p>
<p class="p8"><span class="Apple-converted-space">        </span>"00:02:c9:1e:b4:e0/-1" : { <span class="s1">// node 2</span></p>
<p class="p8"><span class="Apple-converted-space">            </span>"basic": {</p>
<p class="p8"><span class="Apple-converted-space">                </span>"ips": ["10.0.1.2"],</p>
<p class="p8"><span class="Apple-converted-space">                </span>"location": "of:0000000000000001/7"</p>
<p class="p8"><span class="Apple-converted-space">            </span>}</p>
<p class="p8"><span class="Apple-converted-space">        </span>},</p>
<p class="p8"><span class="Apple-converted-space">        </span>"74:44:01:74:61:92/-1" : { <span class="s3">// vSG3</span></p>
<p class="p8"><span class="Apple-converted-space">            </span>"basic": {</p>
<p class="p8"><span class="Apple-converted-space">                </span>"ips": ["C.C.C.C"], <span class="s3">// vSG3 public IP address</span></p>
<p class="p8"><span class="Apple-converted-space">                </span>"location": "of:0000000000000001/30"</p>
<p class="p8"><span class="Apple-converted-space">            </span>}</p>
<p class="p8"><span class="Apple-converted-space">        </span>},</p>
<p class="p8"><span class="Apple-converted-space">        </span>"00:02:c9:1e:b4:60/-1" : { <span class="s1">// node 2</span></p>
<p class="p8"><span class="Apple-converted-space">            </span>"basic": {</p>
<p class="p8"><span class="Apple-converted-space">                </span>"ips": ["10.0.2.1"], <span class="s1">// node 2 IP</span></p>
<p class="p8"><span class="Apple-converted-space">                </span>"location": "of:0000000000000002/5"</p>
<p class="p8"><span class="Apple-converted-space">            </span>}</p>
<p class="p8"><span class="Apple-converted-space">        </span>}</p>
<p class="p8"><span class="Apple-converted-space">    </span>},</p>
<p class="p6"><span class="s2"><span class="Apple-converted-space">    </span>"links" : { </span>// list of expected links</p>
<p class="p8"><span class="Apple-converted-space">        </span>"of:0000000000000001/1-of:0000000000000191/1" : {</p>
<p class="p8"><span class="Apple-converted-space">            </span>"basic" : {}</p>
<p class="p8"><span class="Apple-converted-space">        </span>},</p>
<p class="p8"><span class="Apple-converted-space">        </span>"of:0000000000000001/3-of:0000000000000192/1" : {</p>
<p class="p8"><span class="Apple-converted-space">            </span>"basic" : {}</p>
<p class="p8"><span class="Apple-converted-space">        </span>},</p>
<p class="p8"><span class="Apple-converted-space">        </span>"of:0000000000000002/1-of:0000000000000191/3" : {</p>
<p class="p8"><span class="Apple-converted-space">            </span>"basic" : {}</p>
<p class="p8"><span class="Apple-converted-space">        </span>},</p>
<p class="p8"><span class="Apple-converted-space">        </span>"of:0000000000000002/3-of:0000000000000192/3" : {</p>
<p class="p8"><span class="Apple-converted-space">            </span>"basic" : {}</p>
<p class="p8"><span class="Apple-converted-space">        </span>},</p>
<p class="p8"><span class="Apple-converted-space">        </span>"of:0000000000000191/1-of:0000000000000001/1" : {</p>
<p class="p8"><span class="Apple-converted-space">            </span>"basic" : {}</p>
<p class="p8"><span class="Apple-converted-space">        </span>},</p>
<p class="p8"><span class="Apple-converted-space">        </span>"of:0000000000000192/1-of:0000000000000001/3" : {</p>
<p class="p8"><span class="Apple-converted-space">            </span>"basic" : {}</p>
<p class="p8"><span class="Apple-converted-space">        </span>},</p>
<p class="p8"><span class="Apple-converted-space">        </span>"of:0000000000000191/3-of:0000000000000002/1" : {</p>
<p class="p8"><span class="Apple-converted-space">            </span>"basic" : {}</p>
<p class="p8"><span class="Apple-converted-space">        </span>},</p>
<p class="p8"><span class="Apple-converted-space">        </span>"of:0000000000000192/3-of:0000000000000002/3" : {</p>
<p class="p8"><span class="Apple-converted-space">            </span>"basic" : {}</p>
<p class="p8"><span class="Apple-converted-space">        </span>}</p>
<p class="p8"><span class="Apple-converted-space">    </span>},</p>
<p class="p8"><span class="Apple-converted-space">    </span>"apps" : {</p>
<p class="p8"><span class="Apple-converted-space">        </span>"org.onosproject.core" : {</p>
<p class="p8"><span class="Apple-converted-space">            </span>"core" : {</p>
<p class="p8"><span class="Apple-converted-space">                </span>"linkDiscoveryMode" : "STRICT" <span class="s7">// enable strict link validation</span></p>
<p class="p8"><span class="Apple-converted-space">            </span>} <span class="Apple-converted-space">   </span></p>
<p class="p8"><span class="Apple-converted-space">        </span>},</p>
<p class="p8"><span class="Apple-converted-space">        </span>"org.onosproject.segmentrouting" : {</p>
<p class="p8"><span class="Apple-converted-space">            </span>"segmentrouting" : {</p>
<p class="p8"><span class="Apple-converted-space">                </span>"vRouterMacs" : [</p>
<p class="p3"><span class="s2"><span class="Apple-converted-space">                    </span>"a4:23:05:34:56:78" </span>// vRouter LAN MAC (vSG’s default gateway)</p>
<p class="p8"><span class="Apple-converted-space">                </span>],</p>
<p class="p8"><span class="Apple-converted-space">                </span>"vRouterId" : "of:0000000000000002", <span class="s3">// vRouter DPID (0/0 is replaced by this)</span></p>
<p class="p8"><span class="Apple-converted-space">                </span>"excludePorts" : [</p>
<p class="p8"><span class="Apple-converted-space">                    </span>"internal-quagga", "external-quagga" <span class="s5">// Do not push subnet and host rules for these ports</span></p>
<p class="p8"><span class="Apple-converted-space">                </span>]</p>
<p class="p8"><span class="Apple-converted-space">            </span>}</p>
<p class="p8"><span class="Apple-converted-space">        </span>},</p>
<p class="p8"><span class="Apple-converted-space">        </span>"org.onosproject.router" : {</p>
<p class="p8"><span class="Apple-converted-space">            </span>"router" : {</p>
<p class="p8"><span class="Apple-converted-space">                </span>"controlPlaneConnectPoint" : "of:0000000000000002/31", <span class="s5">// location of Quagga</span></p>
<p class="p8"><span class="Apple-converted-space">                </span>"ospfEnabled" : "true", <span class="s5">// enable OSPF</span></p>
<p class="p8"><span class="Apple-converted-space">                </span>"pimEnabled" : "true", <span class="s6">// enable PIM</span></p>
<p class="p8"><span class="Apple-converted-space">                </span>"interfaces" : [ "external-quagga" ] <span class="s8">// </span><span class="s5">VR only handles peers on these ports</span></p>
<p class="p8"><span class="Apple-converted-space">            </span>}</p>
<p class="p8"><span class="Apple-converted-space">        </span>}</p>
<p class="p8"><span class="Apple-converted-space">    </span>}</p>
<p class="p8">}</p>
</body>
</html>
